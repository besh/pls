<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Pls Demo</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/waitpls.css">
  <link rel="stylesheet" href="css/main.css">
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/jquery.mockjax.js"></script>
  <script src="js/waitpls.js"></script>
  <script src="js/pls.js"></script>
</head>

<html>
  <body>
    <div id="bodyContainer">
      <header>
        <h1>Pls.js</h1>
        <h2><em>A simple JavaScript library for handling ajax overlays and messages.</em></h2>
      </header>

      <section>
        <p><strong>Pls</strong> helps you easily control common tasks for ajax overlays by passing in various options</p>
        <pre>
          <span class="highlight">// append overlay to selector</span>
          <span>pls(selector).wait({</span>
          <span>  text: 'Pls wait',</span>
          <span>});</span>
        </pre>
        <a href="#" id="simulate" class="btn">Simulate Request!</a>
      </section>

      <section>
        <p><strong>Pls</strong> can easily handle multiple request and offers support to send success and error messages</p>
        <pre>
          <span>$('.add-to-cart').on('click', function(e) {</span>
          <span>  e.preventDefault();</span>
          <span>  var parent = $(this).parent('.item');</span>
          <span class="highlight">  var pls_elm = pls(parent);</span>
          <span>  pls_elm.wait({</span>
          <span>    text: 'Pls wait',</span>
          <span class="highlight">    delay: 2000,</span>
          <span class="highlight">    success: 'Yay it worked!',</span>
          <span class="highlight">    error: 'boo it no work'</span>
          <span>  });</span>
          <span> $.ajax({</span>
          <span>    url: '/restful/fortune'</span>
          <span>  })</span>
          <span>  .done(function(data) {</span>
          <span>    if (data.status === 'success') {</span>
          <span class="highlight">      pls_elm.send('success');</span>
          <span>    } else {</span>
          <span class="highlight">      pls_elm.send('error');</span>
          <span>    }</span>
          <span>  });</span>
          <span>});</span>
        </pre>
      </section>

      <ul>
        <li class="item">
          <div class="image">
            <img src="http://placekitten.com/g/200/200" alt="cat 1">
          </div>
          <a href="#" class="btn add-to-cart">Add to cart</a>
        </li>
        <li class="item">
          <div class="image">
            <img src="http://placekitten.com/g/300/300" alt="cat 2">
          </div>
          <a href="#" class="btn add-to-cart">Add to cart</a>
        </li>
        <li class="item">
          <div class="image">
            <img src="http://placekitten.com/g/350/350" alt="cat 3">
          </div>
          <a href="#" class="btn add-to-cart">Add to cart</a>
        </li>
      </ul>

      <div class="waitpls" id="pls-overlay">
        <div class="container">
          <div class="spinner"></div>
          <p>Wait pls</p>
        </div>
        <div class="background"></div>
      </div>
    </div>
  </body>

  <script>
    document.getElementById('simulate').onclick = function(event){
      event.preventDefault();
      pls('#bodyContainer').wait({
        text: 'Pls wait'
      });

      // simulate request
      setTimeout(function() {
        pls('#bodyContainer').send('success')
      }, 2000);
    };


    $('.add-to-cart').on('click', function(e) {
      e.preventDefault();
      var parent = $(this).parent('.item');
      var pls_elm = pls(parent);

      pls_elm.wait({
        text: 'Pls wait',
        delay: 2000,
        success: 'Yay it worked!',
        error: 'boo it no work'
      });

      $.ajax({
        url: '/restful/fortune'
      })
      .done(function(data) {
        if (data.status === 'success') {
          pls_elm.send('success');
        } else {
          pls_elm.send('error');
        }
      });
    });



    $.mockjax({
      url: "/restful/fortune",
      responseText: {
        status: "success",
        fortune: "Are you a mock turtle?"
      }
    });




  </script>

</html>
